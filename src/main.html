<!DOCTYPE html>
<html>

<head>
    <meta name="alumne" content="Sorin Chiperi Arnaut">
    <meta name="codi" content="u1987503">

    <meta charset="UTF-8">
    <title>Pr√†ctica 3</title>

    <link rel="stylesheet" href="main.css">
    <script src="lib/gl-matrix.js"></script>
    <script src="main.js"></script>
    <script src="object.js"></script>
    <script src="player.js"></script>
    <script src="input.js"></script>
    <script src="camera.js"></script>
    <script src="renderer.js"></script>
    <script src="scene.js"></script>
    <script src="models/primitives.js"></script>
    <script src="models/kevin.js"></script>
    <script src="models/shrek_wazowski.js"></script>
    <script src="models/draven.js"></script>

    <script id="objectVertexShader" type="x-shader/x-vertex">#version 300 es
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        uniform mat3 normalMatrix;

        in vec3 vertexPosition;
        in vec3 vertexNormal;
        in vec2 vertexTextureCoords;

        out vec3 fragmentNormal;
        out vec2 fragmentTextureCoords;

        void main() {
            gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);
            fragmentNormal = normalize(normalMatrix * vertexNormal);
            fragmentTextureCoords = vertexTextureCoords;
        }
    </script>

    <script id="objectFragmentShader" type="x-shader/x-fragment">#version 300 es
        precision mediump float;

        uniform vec3 objectColor;

        in vec3 fragmentNormal;
        in vec2 fragmentTextureCoords;

        out vec4 fragmentColor;

        void main() {
            vec3 lightDirection = normalize(vec3(1.0, 1.0, 0.0));
            float diff = max(dot(fragmentNormal, lightDirection), 0.0);
            vec3 ambient = vec3(0.4, 0.4, 0.4);
            vec3 diffuse = vec3(0.9, 0.9, 0.9) * diff;

            vec3 color = objectColor * (ambient + diffuse);
            fragmentColor = vec4(color, 1.0);
        }
    </script>

    <script id="toonFragmentShader" type="x-shader/x-fragment">#version 300 es
        precision mediump float;

        uniform vec3 objectColor;

        in vec3 fragmentNormal;
        in vec2 fragmentTextureCoords;

        out vec4 fragmentColor;

        vec3 toonShading(vec3 normal) {
            vec3 lightDirection = normalize(vec3(1.0, 1.0, 0.0));
            float diff = max(dot(normal, lightDirection), 0.0);
            float levels = 3.0;
            float scaleFactor = 1.0/levels;
            vec3 diffuse = ceil(diff * levels) * scaleFactor * lightDirection;

            return objectColor * diffuse;
        }

        void main() {
            fragmentColor = vec4(toonShading(fragmentNormal), 1.0);
        }
    </script>
</head>

<body>
<div id="gameLayout">
    <div id="gameContainer">
        <canvas id="gameCanvas" width="1280" height="720" style="border: 1px solid black">
            El navegador no suporta HTML5.
        </canvas>
        <div id="info">
            <div id="playerCoordinates">
                <span>X: <span id="playerX">0.00</span></span>
                <span>Y: <span id="playerY">0.00</span></span>
                <span>Z: <span id="playerZ">0.00</span></span>
            </div>
        </div>
        <div id="settings">
            <div class="slider-container">
                <label for="sensitivitySlider">Sensibilitat: <span id="sensitivityValue">1.0</span></label>
                <input type="range" id="sensitivitySlider" min="0.1" max="5.0" step="0.1" value="1.0" disabled>
            </div>
            <div class="slider-container">
                <label for="framerateSlider">FPS: <span id="framerateValue">60</span></label>
                <input type="range" id="framerateSlider" min="30" max="240" step="30" value="60" disabled>
            </div>
            <div class="shader-option">
                <span>Shader:</span>
                <input type="radio" id="shaderNormal" name="shaderMode" value="normal" checked disabled>
                <label for="shaderNormal">Normal</label>
                <input type="radio" id="shaderToon" name="shaderMode" value="toon" disabled>
                <label for="shaderToon">Toon</label>
            </div>
            <div class="mode-option">
                <span>Mode:</span>
                <input type="radio" id="modeSolid" name="visualizationMode" value="solid" checked disabled>
                <label for="modeSolid">Solid</label>
                <input type="radio" id="modeWireframe" name="visualizationMode" value="wireframe" disabled>
                <label for="modeWireframe">Wireframe</label>
            </div>
        </div>
    </div>
</div>
</body>

</html>